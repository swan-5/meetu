<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>MeetU ê´€ë¦¬ì ëª¨ë“œ</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; padding: 20px; }
        .user-card { background: white; padding: 20px; border-radius: 10px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .status-pending { color: orange; font-weight: bold; }
        .status-verified { color: green; font-weight: bold; }
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; margin-left: 5px; }
        .btn-v { background: #4CAF50; color: white; }
        .btn-r { background: #f44336; color: white; }
        img { cursor: pointer; border-radius: 5px; transition: 0.3s; }
        img:hover { transform: scale(3); z-index: 100; position: relative; }
    </style>
</head>
<body>
    <h1>MeetU ê°€ì… ìŠ¹ì¸ ëŒ€ê¸° ëª…ë‹¨ ğŸ“‹</h1>
    <div id="userList"></div>

    <script>
        async function loadUsers() {
            const res = await fetch('http://127.0.0.1:8000/admin/users/');
            const users = await res.json();
            const container = document.getElementById('userList');
            container.innerHTML = users.map(u => `
                <div class="user-card">
                    <div>
                        <strong>${u.nickname}</strong> (${u.university} / ${u.gender})<br>
                        ìƒíƒœ: <span class="status-${u.is_verified}">${u.is_verified}</span>
                    </div>
                    <div>
                        <img src="${u.student_card_url}" width="80" alt="í•™ìƒì¦">
                    </div>
                    <div>
                        <button class="btn btn-v" onclick="updateStatus(${u.id}, 'verified')">ìŠ¹ì¸</button>
                        <button class="btn btn-r" onclick="updateStatus(${u.id}, 'rejected')">ê±°ì ˆ</button>
                    </div>
                </div>
            `).join('');
        }

        async function updateStatus(uid, status) {
            await fetch(`http://127.0.0.1:8000/admin/verify/${uid}?status=${status}`, { method: 'PATCH' });
            alert("ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
            loadUsers();
        }

        loadUsers();
    </script>
</body>
</html>